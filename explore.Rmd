---
title: "explore"
author: "Avishek"
date: "2023-04-02"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Import the Dataset

```{r}
# install.packages(c("rgbif", "plyr"))
library(rgbif)
# For single species
lck <- occ_search(scientificName = "Lynx canadensis Kerr, 1792", limit = 10164)
```


```{r}
lc.data <- lck$data
# Export data as csv file
write.csv(lc.data, "datasets/raw/lc_raw.csv", row.names = FALSE)
```

```{r}
lc.data <- read.csv("datasets/raw/lc_raw.csv")
```

```{r}
colnames(lc.data)
```

```{r}
# percentage of missing values in each column in training dataset
p <- function(x) {sum(is.na(x))/length(x)*100}
sort(apply(lc.data, 2, p)) # marmin = 2 means function will be applied in each column 
```

```{r}
# Provinces
unique(lc$stateProvince)
```


```{r}
lc <- lc.data[, c('countryCode', 'stateProvince', 'higherClassification', 'month', 'locality', 'higherGeography', 'sex', 'decimalLatitude', 'decimalLongitude', 'dateIdentified', 'coordinateUncertaintyInMeters', 'footprintWKT', 'country')]

lc <- lc[lc$stateProvince == 'British Columbia' & !is.na(lc$stateProvince),]
```

```{r}
write.csv(lc, "datasets/processed/lc.csv", row.names = FALSE)
```

## Plot the data

```{r}
lc <- read.csv("datasets/processed/lc.csv")
```

Plot the whole data

```{r}
plot(decimalLatitude ~ decimalLongitude,
     pch = 16,
     col = "#046C9A",
     data = lc.data)
```

Plot the BC data

```{r}
plot(decimalLatitude ~ decimalLongitude,
     pch = 16,
     col = "#046C9A",
     data = lc)
```